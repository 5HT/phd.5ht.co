\addtocontents{toc}{\protect\newpage}
\chapter{Базова бібліотека середовища виконання}

\section{Філософія N2O.TECH}

Після побудови в розділі 3 формального середовища виконання,
яке складається з операційної системи у якій виконуються
CPS-інтерпретатори з формальною системою вводу-виводу IO, можна зразу
переходити до базової бібліотеки середовища виконання.

Даний розділ формалізує інтерфейс прикладного програмування та систему
бібліотек часу виконання для забезпечення потреб побудови гетерогенних систем та сервісів.

N2O.TECH визначає специфікацію на ПЗ усіх рівнів прикладної моделі
для підприємств на функціональних мовах програмування. Ця
специфікація визначає правила побудови WebSocket сервера,
бінарного серіалізатора та веб-фреймворку визначеному
формальними протоколами. Промислові версії також підтримують
систему управління бізнес-процесами та ефективне сховище
з глобальним простором ключів.

N2O — це формальна філософія та інженерна вправа водночас.
Вона обмежує автора бути ефективним та точним не втрачаючи
при цьому повноти та функціональності. Це накшталт внутрішньої
дисципліні при проектуванні програмного забезпечення. Ця філософія
більше 8 років застосовується на практиці для побудови систем SYNRC,
та визначає стандартний мінімальний набір для демонстрації однієї
з сучасних моделей реактивного веб-програмування, яка включає: веб-сокет
веб-фреймвок з бінарною серілізацією, пушами та контролем DOM елементів
зі сторони сервера. N2O вчить будувати прості та надійні системи
на будь-якій мові програмування.

Мови програмування розділені на чотири рівня як для клієнтської
(мобільної та веб розробки) так і для серверної розробки (бекенд
системи). Нульовий рівень — тотальні формальні алгебраїчні мови
програмування, що забезбечують повноту, функціональність та доведення
властивостей прогрм згідно сучасних уявлень про математичне моделювання
та системи залежних типів побудованих на розшаруваннях. Перший
рівень — формальні функціональні мови програмування, як правило
System F, System Fω які успішно використовуються в промисловості
та забезпечують достатньо формальний запис який піддається
масштабуванню у великих командах завдяки потужному ядру компіляторів.
Другий рівень — неформальні (без формальної операційної чи денотаційної
семантики) чи формальних верифікаторів, які проте успішно
використовуються в промисловості, можуть бути як з розвиненими
системами типів з узагальненими шаблонами та типами сумами,
так і однотипними мовами програмування з динамічною типізацією.
Третій рівень — мови які погано піддаються масштабуванню у
промисловому виробництві (на основі спостережень за власним досвідом).

\begin{lstlisting}
    Client Tier 3: (JavaScript, Lua)
    Client Tier 2: (Swift, Kotlin, TypeScript)
    Client Tier 1: (UrWeb, OCaml, PureScript)
    Client Tier 0: (Formality, PTS)

    Server Tier 3: (PHP, Python, Perl, Ruby)
    Server Tier 2: (Erlang, Elixir)
    Server Tier 1: (Standard ML, Haskell, F#, Rust, Hamler)
    Server Tier 0: (Coq, Agda, Lean, MLTT/HTS)
\end{lstlisting}

Філософія N2O визначає структуру операційних середовищ (runtimes) як
операційну систему лямбда-інтерпретаторів які працюють на паралельному
обчислювальному середовищі (ядрах процесорів). Кожне з ядер процесорів
виконує в нескінченному циклі команди лямбда-інтерпретаторів, переключаючи
через певний проміжок часу на потік команд іншого інтерпретатора. Таке
визначення дає змогу вбудувати цю структуру у віртуальну машину Erlang:
1) Головний процес додатку; 2) Супервізор додатку; 3) Проміжні
супервізори; 4) Кінцеві пул процесорів повідомлень.

\section{Мови реалізації}

\textbf{Standard ML}\footnote{\url{https://github.com/o1}}. В академічних цілях Марат Хафізов створив
за специфікаєю N2O/NITRO порт на мови Standard ML (SML/NJ та MLton).
Ця робота представлена Github організацією O1 в структурі N2O.

\textbf{Haskell}\footnote{\url{https://github.com/o3}}. Перший експеримент з формалілазції N2O в систему F
була робота Андрія Мельникова. Пізніше, більш повну версію з NITRO протокол
запропонував Марат Хафізов, ця версія представлена на Github як організація O3.

\textbf{F\#}\footnote{\url{https://ws.erp.uno}}. Також у якості вправи Siegmentation Fault зробив порт NITRO
на мову F# разом з ETF кодуванням. Ці напрацювання представлені в Github
організації O61.

\textbf{Lean 4}\footnote{\url{https://github.com/o89}}. У якості більшо формальної платформи з залежними типами,
мова Lean 4 від Леонардо де Мура з Microsoft. Siegmentation Fault автор порта,
який представлений Github організацією O89 та сайтом lean4.dev.

\textbf{Erlang/Elixir}\footnote{\url{https://github.com/synrc}}. Єдина промислова платформа, яка в повній мірі реалізує
специфікацію N2O.TECH --- Erlang/Elixir.

\textbf{Hamler}. Нова формальна платоформа на базі PureScript для віртуальної машини Erlang.
В подальшому цей розділ буде присвячений імплементації та специфікації
на мові Hamler (варіація PureScript з бекендом в Erlang Core).

\begin{table}[h]
\begin{center}
\caption{List of languages, tried as verification targets}
\tabcolsep7pt\begin{tabular}{lcccc}
\hline
\textbf{Платформа} & \textbf{Набір реалізованих компонент} \\
\hline
Erlang/OTP & N2O, BPE, KVS, NITRO, MAD, FORM \\
Hamler/OTP & N2O, BPE, KVS \\
Lean 4 & N2O, NITRO, MAD, ETF \\
Standard ML & N2O, NITRO, ETF \\
Haskell & N2O, NITRO, ETF \\
F\# & N2O, NITRO, ETF \\
\hline
\end{tabular}
\end{center}
\end{table}

Авторськими вважаються імплементації на мовах Erlang (Elixir) та Hamler (PureScript).
Інші представлені імплементації вважаються сертифікаваними формальними референсними моделями.

\section{Структури даних BASE}
Структури даних представлені додатком BASE. Основні модулі додатку:
List, Array, Atomics, Binary, Bool, Char, Counters, DateTime, Digraph,
Enum, Eq, Float, Int, Map, Maybe, Ord, OrdDict, OrdSet, Pid, Queue,
Read, Record, Regex, Set, Time, Tuple.

\section{Сервіси середовище виконання RT}
Сервіси середовища виконання представлені додатком RT. Основні модулі додатку:
Code, Dir, File, IO, OS, Timer, Application, Supervisor, Process, Behaviour,
ETS, Mnesia, UDP, TCP, QUIC.

\section{WebSocket-сервер N2O}
Сервіси веб-сокет сервера, представлені додатком N2O: N2O, Pi, Proto,
Ring, MQTT, WS, Heart, Syn, FTP, NITRO, ETF, GCM, Session.

\section{Сховище даних KVS}
Сервіси сховища даних представлені додатком KVS: KVS,
Stream, St, Rocks, Mnesia, FS.

\section{Бізнес-процеси BPE}
Сервіси системи управління бізнес-процесами
представлені додатком BPE: BPE, Event, Action, Process, Hist, Flow.

\section{Контрольні елементи NITRO}
Сервіси веб-фреймворка, представлені додатком NITRO: NITRO, Combo,
Edit, Form, Input, Table, Actions, Render.

